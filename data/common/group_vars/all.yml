---
# ==============================================================================
# GLOBAL VARIABLES - RARELY CHANGED
# ==============================================================================
# These variables are derived from config.yml or are static defaults
# Do not edit directly - regenerated by 'task prep'

# ==============================================================================
# DIRECTORY PATHS
# ==============================================================================
# Standard paths used across all deployments

# Container paths (inside onboarder container)
container_paths:
  workspace: "/docker-workspace"
  data_dir: "{{ container_paths.workspace }}/data"
  images_dir: "{{ container_paths.workspace }}/images"
  environments_dir: "{{ container_paths.workspace }}/environments"
  config_dir: "{{ container_paths.workspace }}/config"
  install_dir: "{{ container_paths.config_dir }}/install"
  cache_dir: "{{ container_paths.install_dir }}/.cache"
  logs_dir: "{{ container_paths.cache_dir }}/logs"
  ssh_dir: "{{ container_paths.install_dir }}/.ssh"

# Host paths (on mgmt_kvm)
host_paths:
  # Base installation directory
  base: "/opt/{{ ssh.user }}"
  installer: "{{ host_paths.base }}/openspace_platform_installer"

# Ansible paths (used in playbooks)
ansible_paths:
  # SSH keys (container paths)
  ssh_keys:
    mcm: "{{ container_paths.ssh_dir }}/mcm_ssh_key"
    osms: "{{ container_paths.ssh_dir }}/osms_ssh_key"
    osdc: "{{ container_paths.ssh_dir }}/osdc_ssh_key"
  
  # Generated configs
  generated:
    inventory: "{{ container_paths.install_dir }}/generated/inventory.yml"

# ==============================================================================
# COMPONENT VERSIONS
# ==============================================================================
# Software versions for various components
versions:
  # Core components (from config.yml deployment section)
  onboarder: "{{ deployment.onboarder_version }}"
  osms_tooling: "{{ deployment.osms_tooling_version }}"

# ==============================================================================
# REGISTRY CONFIGURATION
# ==============================================================================
registry:
  harbor:
    # Internal registry endpoint
    endpoint: "harbor.{{ domain.mcm }}"
    port: 443
    
    # Harbor projects
    projects:
      - "openspace"
      - "osms"
      - "osdc"
    
    # Storage
    storage:
      size: "100Gi"
      class: "longhorn"

# ==============================================================================
# SECURITY DEFAULTS
# ==============================================================================
security:
  # SSH configuration
  ssh:
    port: 22
    key_type: "rsa"
    key_bits: 4096
    
  # Firewall defaults
  firewall:
    enabled: true
    default_zone: "public"
  
  # SELinux
  selinux:
    mode: "enforcing"
    
  # Sudo configuration
  sudo:
    timeout: 15
    use_pty: true

# ==============================================================================
# TIMEOUTS AND RETRIES
# ==============================================================================
timeouts:
  # VM operations
  vm_start: 300  # seconds
  vm_stop: 120
  vm_provision: 600
  
  # Cluster operations
  cluster_deploy: 1800
  cluster_ready: 900
  
  # Application deployments
  harbor_deploy: 600
  rancher_deploy: 900
  gitea_deploy: 300
  argocd_deploy: 300

retries:
  # Network operations
  ping: 5
  ssh: 3
  api: 5
  
  # Deployment operations
  helm_install: 3
  kubectl_apply: 3