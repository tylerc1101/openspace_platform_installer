# ==============================================================================
# Global Variables - GENERATED FILE
# ==============================================================================
# ⚠️  DO NOT EDIT THIS FILE MANUALLY
# 
# This file is GENERATED from: deployment.yml
# To make changes:
#   1. Edit deployment.yml
#   2. Run: task prep-config
#   3. This file will be regenerated
# 
# Generated: {{ ansible_date_time.iso8601 }}
# ==============================================================================

# ==============================================================================
# Deployment Information
# ==============================================================================
deployment_name: "{{ deployment.name }}"
deployment_type: "{{ deployment.type }}"
deployment_version: "{{ deployment.version }}"
onboarder_version: "{{ deployment.onboarder_version }}"
osms_tooling_version: "{{ deployment.osms_tooling_version }}"

# ==============================================================================
# Domain Configuration
# ==============================================================================
domain_name: "{{ domain.base }}"

# ==============================================================================
# Network Configuration
# ==============================================================================

# Customer Network (WAN)
customer_gateway: "{{ networks.customer.gateway }}"
customer_cidr: "{{ networks.customer.cidr }}"
customer_dns_servers: {{ networks.customer.dns_servers | to_json }}

# Management Network
mgmt_network: "{{ networks.management.network }}"
mgmt_cidr: "{{ networks.management.cidr }}"
mgmt_gateway: "{{ networks.management.gateway }}"
mgmt_dns_servers: {{ networks.management.dns_servers | to_json }}

# iDRAC Network
idrac_network: "{{ networks.idrac.network }}"
idrac_cidr: "{{ networks.idrac.cidr }}"
idrac_gateway: "{{ networks.idrac.gateway }}"

# ==============================================================================
# Cluster Configuration
# ==============================================================================

# Management Cluster (MCM)
{% if clusters.management_cluster is defined %}
{% for cluster in clusters.management_cluster.clusters %}
mcm_cluster_name: "{{ cluster.cluster_name }}"
mcm_nodes:
{% for node in cluster.nodes %}
  - name: "{{ node.name }}"
    mgmt_ip: "{{ node.mgmt_ip }}"
    roles: {{ node.roles | to_json }}
{% endfor %}
{% endfor %}
{% endif %}

# OpenSpace Management System (OSMS)
{% if clusters.openspace_management_system is defined %}
{% for cluster in clusters.openspace_management_system.clusters %}
osms_cluster_name: "{{ cluster.cluster_name }}"
{% if cluster.deployment_yaml is defined %}
osms_deployment_yaml: "{{ cluster.deployment_yaml }}"
{% endif %}
osms_nodes:
{% for node in cluster.nodes %}
  - name: "{{ node.name }}"
    mgmt_ip: "{{ node.mgmt_ip }}"
    roles: {{ node.roles | to_json }}
{% endfor %}
{% endfor %}
{% endif %}

# OpenSpace Data Cluster (OSDC)
{% if clusters.openspace_datapath_cluster is defined %}
{% for cluster in clusters.openspace_datapath_cluster.clusters %}
osdc_cluster_name: "{{ cluster.cluster_name }}"
{% if cluster.deployment_yaml is defined %}
osdc_deployment_yaml: "{{ cluster.deployment_yaml }}"
{% endif %}
osdc_nodes:
{% for node in cluster.nodes %}
  - name: "{{ node.name }}"
    mgmt_ip: "{{ node.mgmt_ip }}"
    roles: {{ node.roles | to_json }}
{% if node.mac_address is defined %}
    mac_address: "{{ node.mac_address }}"
{% endif %}
{% endfor %}
{% endfor %}
{% endif %}

# ==============================================================================
# NTP Configuration
# ==============================================================================
ntp_server: "{{ ntp.server }}"
ntp_timezone: "{{ ntp.timezone }}"

# ==============================================================================
# Storage Configuration
# ==============================================================================
{% if storage is defined %}
{% if storage.nfs is defined %}
# NFS Storage
nfs_enabled: {{ storage.nfs.enabled | default(false) | lower }}
{% if storage.nfs.enabled | default(false) %}
nfs_server: "{{ storage.nfs.server }}"
nfs_path: "{{ storage.nfs.path }}"
{% endif %}
{% endif %}
{% endif %}

# ==============================================================================
# Onboarder Directory Paths
# ==============================================================================
config_dir: "/docker-workspace/config"
install_dir: "{{ config_dir }}/install"
sample_vsphere_dir: "{{ config_dir }}/sample-vsphere"
cache_dir: "{{ install_dir }}/.cache"
common_dir: "{{ config_dir }}/common"

data_dir: "/docker-workspace/data"
deployment_dir: "{{ data_dir }}/deployments/{{ deployment.type }}/{{ deployment.version }}"
onboarder_dir: "{{ data_dir }}/onboarders/{{ onboarder_version }}"
