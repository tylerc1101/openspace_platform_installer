[defaults]
# Disable host key checking (can be problematic in automated environments)
host_key_checking = False

# Makes fact gathering explicit
gathering = explicit

# SSH timeout settings
timeout = 30
connect_timeout = 30

# Retry settings
connect_retry_timeout = 60

# Don't create retry files
retry_files_enabled = False

# Pipelining improves performance
pipelining = True

# Allow variable names with underscores and hyphens
# This allows mgmt_kvm and mgmt-kvm to match
force_valid_group_names = ignore

# Increase verbosity for debugging (can be overridden with -v)
# verbosity = 0

# Logs
log_path = /install/logs/ansible.log

# Collections paths - check local collections first, then system
collections_paths = /usr/local/lib/python3.9/site-packages/ansible_collections

[ssh_connection]
# DISA STIG compatible SSH settings for RHEL 9
# All SSH arguments in one line to avoid duplication errors

ssh_args = -o ConnectTimeout=30 -o ConnectionAttempts=3 -o ControlMaster=auto -o ControlPersist=60s -o KexAlgorithms=ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256 -o Ciphers=aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com -o MACs=hmac-sha2-256,hmac-sha2-512,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com -o HostKeyAlgorithms=ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,rsa-sha2-256,rsa-sha2-512 -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null

# Transfer method (smart is usually best)
transfer_method = smart

# SCP if available (more compatible with hardened systems)
scp_if_ssh = True

# Pipelining (improves performance)
pipelining = True

[privilege_escalation]
become = True
become_method = sudo
become_user = root
become_ask_pass = False